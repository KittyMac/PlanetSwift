//
// Autogenerated by gaxb at 01:38:55 PM on 01/20/15
//

import UIKit

public class TextField: TextFieldBase {
    lazy public var textField = UITextField()
    lazy private var textFieldDelegate = TextFieldHelper()

    override public var control: UIControl? {
        get {
            if textField.delegate == nil {
                textField.delegate = textFieldDelegate
            }
            return textField
        }
        set {
            if newValue is UITextField {
                textField = newValue as! UITextField
            }
        }
    }

    public override func gaxbPrepare() {
        super.gaxbPrepare()

        textFieldDelegate.textDelegate = self
		
        if text != nil {
            textField.text = text!
        }
        if placeholder != nil {
            textField.placeholder = placeholder!
        }
        if fontName != nil {
            textField.font = UIFont(name: fontName!, size: CGFloat(fontSize))
        }
        if textColor != nil {
            textField.textColor = textColor!
        }
        if textAlignment != nil {
			textField.textAlignment = NSTextAlignment.fromPlanetUITextAlignment(textAlignment!)
        }
        if adjustsFontSizeToFitWidth != nil {
            textField.adjustsFontSizeToFitWidth = adjustsFontSizeToFitWidth!
        }
        if borderStyle != nil {
            textField.borderStyle = UITextBorderStyle.fromPlanetUITextFieldBorderStyle(borderStyle!)
        }
		if secureTextEntry != nil {
			textField.secureTextEntry = secureTextEntry!
		}
		if clearButtonMode != nil {
			textField.clearButtonMode = UITextFieldViewMode.fromPlanetUITextFieldViewMode(clearButtonMode!)
		}
		if clearsOnBeginEditing != nil {
			textField.clearsOnBeginEditing = clearsOnBeginEditing!
		}
		if returnKeyType != nil {
			textField.returnKeyType = UIReturnKeyType.fromPlanetUIReturnKeyType(returnKeyType!)
		}
		if keyboardType != nil {
			textField.keyboardType = UIKeyboardType.fromPlanetUIKeyboardType(keyboardType!)
		}
		
        textField.minimumFontSize = CGFloat(minimumFontSize)
    }

    func textFieldDidBeginEditing(textField: UITextField) {
        if onBeginEditing != nil {
            doNotification(onBeginEditing!)
        }
    }

    func textFieldDidEndEditing(textField: UITextField) {
        if onEndEditing != nil {
            doNotification(onEndEditing!)
        }
    }

    func textFieldShouldReturn(textField: UITextField) {
        if onReturnPressed != nil {
            doNotification(onReturnPressed!)
        }
    }

    func doNotification(note: String) {
        let (scopeObject: AnyObject?, name) = self.parseNotification(note)
        if name != nil {
            NSNotificationCenter.defaultCenter().postNotificationName(name!, object: scopeObject)
        }
    }
}

private class TextFieldHelper: NSObject, UITextFieldDelegate {
    weak var textDelegate: TextField?

    func textFieldDidBeginEditing(textField: UITextField) {

        if textDelegate != nil {
            textDelegate!.textFieldDidBeginEditing(textField)
        }
    }

    func textFieldDidEndEditing(textField: UITextField) {

        if textDelegate != nil {
            textDelegate!.textFieldDidEndEditing(textField)
        }
    }

    func textFieldShouldReturn(textField: UITextField) {

        if textDelegate != nil {
            textDelegate!.textFieldShouldReturn(textField)
        }
    }
}
