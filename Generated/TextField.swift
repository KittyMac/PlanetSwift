//
// Autogenerated by gaxb at 01:38:55 PM on 01/20/15
//

public class TextField: TextFieldBase {
    lazy var textField = UITextField()
    lazy var textFieldWrapper = TextFieldWrapper()
    
    override public var view: UIView {
        get {
            textField.delegate = textFieldWrapper
            return textField
        }
        set {
            if newValue is UITextField {
                textField = newValue as UITextField
            }
        }
    }
    
    public override func gaxbPrepare() {
        super.gaxbPrepare()
        
        textFieldWrapper.textDelegate = self
        
        if text != nil {
            textField.text = text!
        }
        if placeholder != nil {
            textField.placeholder = placeholder!
        }
        if fontName != nil {
            textField.font = UIFont(name: fontName!, size: CGFloat(fontSize))
        }
        if textColor != nil {
            textField.textColor = textColor!
        }
        if textAlignment != nil {
            switch textAlignment! {
            case PlanetUI.TextAlignment.Center:
                textField.textAlignment = .Center
            case PlanetUI.TextAlignment.Right:
                textField.textAlignment = .Right
            case PlanetUI.TextAlignment.Left:
                textField.textAlignment = .Left
            case PlanetUI.TextAlignment.Justified:
                textField.textAlignment = .Justified
            case PlanetUI.TextAlignment.Natural:
                textField.textAlignment = .Natural
            }
        }
        if adjustsFontSizeToFitWidth != nil {
            textField.adjustsFontSizeToFitWidth = adjustsFontSizeToFitWidth!
        }
        if borderStyle != nil {
            switch borderStyle! {
            case PlanetUI.TextFieldBorderStyle.line:
                textField.borderStyle = .Line
            case PlanetUI.TextFieldBorderStyle.bezel:
                textField.borderStyle = .Bezel
            case PlanetUI.TextFieldBorderStyle.roundedRect:
                textField.borderStyle = .RoundedRect
            default:
                textField.borderStyle = .None
            }
        }
        
        textField.minimumFontSize = CGFloat(minimumFontSize)
    }
    
    func textFieldDidBeginEditing(textField: UITextField) {
        if onBeginEditing != nil {
            doNotification(onBeginEditing!)
        }
    }
    
    func textFieldDidEndEditing(textField: UITextField) {
        if onEndEditing != nil {
            doNotification(onEndEditing!)
        }
    }
    
    func textFieldShouldReturn(textField: UITextField) {
        if onReturnPressed != nil {
            doNotification(onReturnPressed!)
        }
    }
    
    func doNotification(note: String) {
        let (scopeObject: AnyObject?, name) = self.parseNotification(note)
        if name != nil {
            NSNotificationCenter.defaultCenter().postNotificationName(name!, object: scopeObject)
        }
    }
}

class TextFieldWrapper: NSObject, UITextFieldDelegate {
    var textDelegate: TextField?
    
    func textFieldDidBeginEditing(textField: UITextField) {
        var test = 0
        
        if textDelegate != nil {
            textDelegate!.textFieldDidBeginEditing(textField)
        }
    }
    
    func textFieldDidEndEditing(textField: UITextField) {
        var test = 0
        
        if textDelegate != nil {
            textDelegate!.textFieldDidEndEditing(textField)
        }
    }
    
    func textFieldShouldReturn(textField: UITextField) {
        var test = 0
        
        if textDelegate != nil {
            textDelegate!.textFieldShouldReturn(textField)
        }
    }
}